<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 580" width="900" height="580" font-family="Arial, sans-serif">

  <!-- Background -->
  <rect width="900" height="580" fill="#F8FAFC" rx="12"/>

  <!-- Title -->
  <text x="450" y="38" text-anchor="middle" font-size="18" font-weight="bold" fill="#1F4E79">TruPharma Clinical Intelligence — Data Architecture</text>
  <text x="450" y="58" text-anchor="middle" font-size="12" fill="#888">Full Stack: CSV Sources → Snowflake → Snowsight Dashboard</text>

  <!-- ═══════════════════════════════════════════════ -->
  <!-- LAYER 1: DATA SOURCES -->
  <!-- ═══════════════════════════════════════════════ -->

  <!-- Layer label -->
  <rect x="24" y="80" width="130" height="24" rx="4" fill="#1F4E79"/>
  <text x="89" y="96" text-anchor="middle" font-size="11" font-weight="bold" fill="white">DATA SOURCES</text>

  <!-- CSV 1 -->
  <rect x="24" y="116" width="200" height="72" rx="8" fill="white" stroke="#2E75B6" stroke-width="1.5"/>
  <rect x="24" y="116" width="200" height="24" rx="8" fill="#2E75B6"/>
  <rect x="24" y="128" width="200" height="12" fill="#2E75B6"/>
  <text x="124" y="132" text-anchor="middle" font-size="11" font-weight="bold" fill="white">drug_adverse_events.csv</text>
  <text x="124" y="153" text-anchor="middle" font-size="10" fill="#444">64 rows</text>
  <text x="124" y="167" text-anchor="middle" font-size="10" fill="#666">drug · event · race · severity</text>
  <text x="124" y="179" text-anchor="middle" font-size="10" fill="#666">sex · outcome · region</text>

  <!-- CSV 2 -->
  <rect x="24" y="206" width="200" height="72" rx="8" fill="white" stroke="#2E75B6" stroke-width="1.5"/>
  <rect x="24" y="206" width="200" height="24" rx="8" fill="#2E75B6"/>
  <rect x="24" y="218" width="200" height="12" fill="#2E75B6"/>
  <text x="124" y="222" text-anchor="middle" font-size="11" font-weight="bold" fill="white">query_interaction_logs.csv</text>
  <text x="124" y="243" text-anchor="middle" font-size="10" fill="#444">40 rows</text>
  <text x="124" y="257" text-anchor="middle" font-size="10" fill="#666">query · latency · confidence</text>
  <text x="124" y="269" text-anchor="middle" font-size="10" fill="#666">disparity_flag · drug_mentioned</text>

  <!-- FDA source label -->
  <rect x="24" y="296" width="200" height="44" rx="8" fill="#EDF2F7" stroke="#BBCCE0" stroke-width="1.5" stroke-dasharray="5,3"/>
  <text x="124" y="313" text-anchor="middle" font-size="10" fill="#666" font-style="italic">Source: openFDA Drug</text>
  <text x="124" y="328" text-anchor="middle" font-size="10" fill="#666" font-style="italic">Label API + FAERS</text>

  <!-- ═══════════════════════════════════════════════ -->
  <!-- LAYER 2: SNOWFLAKE INGEST -->
  <!-- ═══════════════════════════════════════════════ -->

  <rect x="272" y="80" width="130" height="24" rx="4" fill="#1E6B3C"/>
  <text x="337" y="96" text-anchor="middle" font-size="11" font-weight="bold" fill="white">SNOWFLAKE INGEST</text>

  <!-- Stage box -->
  <rect x="272" y="116" width="172" height="52" rx="8" fill="white" stroke="#1E6B3C" stroke-width="1.5"/>
  <rect x="272" y="116" width="172" height="22" rx="8" fill="#1E6B3C"/>
  <rect x="272" y="126" width="172" height="12" fill="#1E6B3C"/>
  <text x="358" y="131" text-anchor="middle" font-size="11" font-weight="bold" fill="white">TRUPHARMA_STAGE</text>
  <text x="358" y="152" text-anchor="middle" font-size="10" fill="#444">Internal stage (CSV upload)</text>
  <text x="358" y="164" text-anchor="middle" font-size="10" fill="#666">TRUPHARMA_CSV_FORMAT</text>

  <!-- File format box -->
  <rect x="272" y="182" width="172" height="52" rx="8" fill="white" stroke="#1E6B3C" stroke-width="1.5"/>
  <rect x="272" y="182" width="172" height="22" rx="8" fill="#1E6B3C"/>
  <rect x="272" y="192" width="172" height="12" fill="#1E6B3C"/>
  <text x="358" y="197" text-anchor="middle" font-size="11" font-weight="bold" fill="white">COPY INTO</text>
  <text x="358" y="218" text-anchor="middle" font-size="10" fill="#444">Load CSV → Tables</text>
  <text x="358" y="230" text-anchor="middle" font-size="10" fill="#666">ON_ERROR = CONTINUE</text>

  <!-- Warehouse badge -->
  <rect x="272" y="248" width="172" height="44" rx="8" fill="#D9F2E3" stroke="#1E6B3C" stroke-width="1.5"/>
  <text x="358" y="265" text-anchor="middle" font-size="10" font-weight="bold" fill="#1E6B3C">⚙  TRUPHARMA_WH</text>
  <text x="358" y="280" text-anchor="middle" font-size="10" fill="#444">X-SMALL · Auto-suspend 60s</text>

  <!-- ═══════════════════════════════════════════════ -->
  <!-- LAYER 3: SNOWFLAKE STORAGE -->
  <!-- ═══════════════════════════════════════════════ -->

  <rect x="494" y="80" width="130" height="24" rx="4" fill="#4B2E83"/>
  <text x="559" y="96" text-anchor="middle" font-size="11" font-weight="bold" fill="white">SNOWFLAKE STORAGE</text>

  <!-- DB / Schema label -->
  <rect x="494" y="110" width="238" height="20" rx="4" fill="#EDE7F6" stroke="#4B2E83" stroke-width="1"/>
  <text x="613" y="124" text-anchor="middle" font-size="10" font-weight="bold" fill="#4B2E83">TRUPHARMA_DB . CLINICAL</text>

  <!-- Table 1 -->
  <rect x="494" y="138" width="112" height="60" rx="8" fill="white" stroke="#4B2E83" stroke-width="1.5"/>
  <rect x="494" y="138" width="112" height="20" rx="8" fill="#4B2E83"/>
  <rect x="494" y="148" width="112" height="10" fill="#4B2E83"/>
  <text x="550" y="152" text-anchor="middle" font-size="9.5" font-weight="bold" fill="white">DRUG_ADVERSE</text>
  <text x="550" y="162" text-anchor="middle" font-size="9.5" font-weight="bold" fill="white">_EVENTS</text>
  <text x="550" y="178" text-anchor="middle" font-size="9" fill="#444">64 rows</text>
  <text x="550" y="190" text-anchor="middle" font-size="9" fill="#666">14 columns</text>

  <!-- Table 2 -->
  <rect x="620" y="138" width="112" height="60" rx="8" fill="white" stroke="#4B2E83" stroke-width="1.5"/>
  <rect x="620" y="138" width="112" height="20" rx="8" fill="#4B2E83"/>
  <rect x="620" y="148" width="112" height="10" fill="#4B2E83"/>
  <text x="676" y="152" text-anchor="middle" font-size="9.5" font-weight="bold" fill="white">QUERY</text>
  <text x="676" y="162" text-anchor="middle" font-size="9.5" font-weight="bold" fill="white">_INTERACTION_LOGS</text>
  <text x="676" y="178" text-anchor="middle" font-size="9" fill="#444">40 rows</text>
  <text x="676" y="190" text-anchor="middle" font-size="9" fill="#666">14 columns</text>

  <!-- Views header -->
  <rect x="494" y="212" width="238" height="18" rx="4" fill="#D6E4F0"/>
  <text x="613" y="224" text-anchor="middle" font-size="10" font-weight="bold" fill="#1F4E79">Analysis Views (4)</text>

  <!-- View 1 -->
  <rect x="494" y="236" width="112" height="40" rx="6" fill="white" stroke="#2E75B6" stroke-width="1.2"/>
  <text x="550" y="251" text-anchor="middle" font-size="8.5" font-weight="bold" fill="#2E75B6">V_90DAY_DISPARITY</text>
  <text x="550" y="263" text-anchor="middle" font-size="8.5" font-weight="bold" fill="#2E75B6">_SUMMARY</text>
  <text x="550" y="272" text-anchor="middle" font-size="8" fill="#888">Full breakdown</text>

  <!-- View 2 -->
  <rect x="620" y="236" width="112" height="40" rx="6" fill="white" stroke="#2E75B6" stroke-width="1.2"/>
  <text x="676" y="251" text-anchor="middle" font-size="8.5" font-weight="bold" fill="#2E75B6">V_RACIAL_DISPARITY</text>
  <text x="676" y="263" text-anchor="middle" font-size="8.5" font-weight="bold" fill="#2E75B6">_INDEX</text>
  <text x="676" y="272" text-anchor="middle" font-size="8" fill="#888">Disparity index</text>

  <!-- View 3 -->
  <rect x="494" y="282" width="112" height="40" rx="6" fill="white" stroke="#2E75B6" stroke-width="1.2"/>
  <text x="550" y="297" text-anchor="middle" font-size="8.5" font-weight="bold" fill="#2E75B6">V_90DAY_WEEKLY</text>
  <text x="550" y="309" text-anchor="middle" font-size="8.5" font-weight="bold" fill="#2E75B6">_TREND</text>
  <text x="550" y="318" text-anchor="middle" font-size="8" fill="#888">Time series</text>

  <!-- View 4 -->
  <rect x="620" y="282" width="112" height="40" rx="6" fill="white" stroke="#2E75B6" stroke-width="1.2"/>
  <text x="676" y="297" text-anchor="middle" font-size="8.5" font-weight="bold" fill="#2E75B6">V_QUERY_DISPARITY</text>
  <text x="676" y="309" text-anchor="middle" font-size="8.5" font-weight="bold" fill="#2E75B6">_ACTIVITY</text>
  <text x="676" y="318" text-anchor="middle" font-size="8" fill="#888">Usage analytics</text>

  <!-- ═══════════════════════════════════════════════ -->
  <!-- LAYER 4: DASHBOARD -->
  <!-- ═══════════════════════════════════════════════ -->

  <rect x="754" y="80" width="122" height="24" rx="4" fill="#C55A11"/>
  <text x="815" y="96" text-anchor="middle" font-size="11" font-weight="bold" fill="white">DASHBOARD</text>

  <!-- Dashboard container -->
  <rect x="754" y="116" width="122" height="218" rx="8" fill="white" stroke="#C55A11" stroke-width="1.5"/>
  <rect x="754" y="116" width="122" height="22" rx="8" fill="#C55A11"/>
  <rect x="754" y="126" width="122" height="12" fill="#C55A11"/>
  <text x="815" y="131" text-anchor="middle" font-size="10.5" font-weight="bold" fill="white">Snowsight</text>

  <!-- Chart tiles -->
  <rect x="762" y="146" width="106" height="26" rx="4" fill="#FFF3E0" stroke="#C55A11" stroke-width="1"/>
  <text x="815" y="158" text-anchor="middle" font-size="9" font-weight="bold" fill="#C55A11">Chart 1</text>
  <text x="815" y="168" text-anchor="middle" font-size="8.5" fill="#555">KPI Summary Cards</text>

  <rect x="762" y="178" width="106" height="26" rx="4" fill="#E8F4FD" stroke="#2E75B6" stroke-width="1"/>
  <text x="815" y="190" text-anchor="middle" font-size="9" font-weight="bold" fill="#2E75B6">Chart 2</text>
  <text x="815" y="200" text-anchor="middle" font-size="8.5" fill="#555">Disparity Index Bar</text>

  <rect x="762" y="210" width="106" height="26" rx="4" fill="#D9F2E3" stroke="#1E6B3C" stroke-width="1"/>
  <text x="815" y="222" text-anchor="middle" font-size="9" font-weight="bold" fill="#1E6B3C">Chart 3</text>
  <text x="815" y="232" text-anchor="middle" font-size="8.5" fill="#555">90-Day Trend Line</text>

  <rect x="762" y="242" width="106" height="26" rx="4" fill="#EDE7F6" stroke="#4B2E83" stroke-width="1"/>
  <text x="815" y="254" text-anchor="middle" font-size="9" font-weight="bold" fill="#4B2E83">Chart 4</text>
  <text x="815" y="264" text-anchor="middle" font-size="8.5" fill="#555">Severity Heat Map</text>

  <rect x="762" y="274" width="106" height="26" rx="4" fill="#FCE4D6" stroke="#C55A11" stroke-width="1"/>
  <text x="815" y="286" text-anchor="middle" font-size="9" font-weight="bold" fill="#C55A11">Chart 5</text>
  <text x="815" y="296" text-anchor="middle" font-size="8.5" fill="#555">Findings Table</text>

  <text x="815" y="326" text-anchor="middle" font-size="8.5" fill="#888" font-style="italic">Interactive filters</text>

  <!-- ═══════════════════════════════════════════════ -->
  <!-- ARROWS -->
  <!-- ═══════════════════════════════════════════════ -->

  <!-- CSV 1 → Stage -->
  <line x1="224" y1="152" x2="270" y2="142" stroke="#2E75B6" stroke-width="1.8" marker-end="url(#arrow-blue)"/>

  <!-- CSV 2 → Stage -->
  <line x1="224" y1="242" x2="270" y2="198" stroke="#2E75B6" stroke-width="1.8" marker-end="url(#arrow-blue)"/>

  <!-- Stage → COPY INTO -->
  <line x1="358" y1="168" x2="358" y2="180" stroke="#1E6B3C" stroke-width="1.8" marker-end="url(#arrow-green)"/>

  <!-- COPY INTO → Tables -->
  <line x1="444" y1="208" x2="492" y2="175" stroke="#4B2E83" stroke-width="1.8" marker-end="url(#arrow-purple)"/>

  <!-- Tables → Views (down arrow) -->
  <line x1="550" y1="198" x2="550" y2="234" stroke="#2E75B6" stroke-width="1.5" stroke-dasharray="4,3" marker-end="url(#arrow-blue)"/>
  <line x1="676" y1="198" x2="676" y2="234" stroke="#2E75B6" stroke-width="1.5" stroke-dasharray="4,3" marker-end="url(#arrow-blue)"/>

  <!-- Views → Dashboard -->
  <line x1="732" y1="256" x2="752" y2="230" stroke="#C55A11" stroke-width="1.8" marker-end="url(#arrow-orange)"/>

  <!-- ═══════════════════════════════════════════════ -->
  <!-- ARROW MARKERS -->
  <!-- ═══════════════════════════════════════════════ -->
  <defs>
    <marker id="arrow-blue" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
      <path d="M0,0 L0,6 L8,3 z" fill="#2E75B6"/>
    </marker>
    <marker id="arrow-green" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
      <path d="M0,0 L0,6 L8,3 z" fill="#1E6B3C"/>
    </marker>
    <marker id="arrow-purple" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
      <path d="M0,0 L0,6 L8,3 z" fill="#4B2E83"/>
    </marker>
    <marker id="arrow-orange" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
      <path d="M0,0 L0,6 L8,3 z" fill="#C55A11"/>
    </marker>
  </defs>

  <!-- ═══════════════════════════════════════════════ -->
  <!-- FLOW LABELS ON ARROWS -->
  <!-- ═══════════════════════════════════════════════ -->
  <text x="247" y="140" text-anchor="middle" font-size="8.5" fill="#2E75B6" font-style="italic">upload</text>
  <text x="247" y="218" text-anchor="middle" font-size="8.5" fill="#2E75B6" font-style="italic">upload</text>
  <text x="376" y="176" text-anchor="middle" font-size="8.5" fill="#1E6B3C" font-style="italic">load</text>
  <text x="472" y="186" text-anchor="middle" font-size="8.5" fill="#4B2E83" font-style="italic">INSERT</text>
  <text x="743" y="240" text-anchor="middle" font-size="8.5" fill="#C55A11" font-style="italic">SELECT</text>

  <!-- ═══════════════════════════════════════════════ -->
  <!-- BOTTOM LEGEND -->
  <!-- ═══════════════════════════════════════════════ -->
  <rect x="24" y="368" width="852" height="60" rx="8" fill="white" stroke="#E0E0E0" stroke-width="1"/>
  <text x="450" y="386" text-anchor="middle" font-size="10" font-weight="bold" fill="#444">Legend</text>

  <rect x="60" y="396" width="12" height="12" rx="2" fill="#2E75B6"/>
  <text x="78" y="407" font-size="9.5" fill="#444">CSV Source Files</text>

  <rect x="180" y="396" width="12" height="12" rx="2" fill="#1E6B3C"/>
  <text x="198" y="407" font-size="9.5" fill="#444">Snowflake Ingest</text>

  <rect x="310" y="396" width="12" height="12" rx="2" fill="#4B2E83"/>
  <text x="328" y="407" font-size="9.5" fill="#444">Tables (raw storage)</text>

  <rect x="460" y="396" width="12" height="12" rx="2" fill="#2E75B6" opacity="0.5"/>
  <text x="478" y="407" font-size="9.5" fill="#444">Analysis Views (SQL)</text>

  <rect x="610" y="396" width="12" height="12" rx="2" fill="#C55A11"/>
  <text x="628" y="407" font-size="9.5" fill="#444">Snowsight Dashboard</text>

  <line x1="745" y1="402" x2="762" y2="402" stroke="#888" stroke-width="1.5" stroke-dasharray="4,2"/>
  <text x="768" y="407" font-size="9.5" fill="#444">Derived / view</text>

  <!-- ═══════════════════════════════════════════════ -->
  <!-- BOTTOM FLOW SUMMARY BAR -->
  <!-- ═══════════════════════════════════════════════ -->
  <rect x="24" y="444" width="852" height="36" rx="8" fill="#1F4E79"/>

  <text x="92" y="466" text-anchor="middle" font-size="10.5" fill="white" font-weight="bold">CSV Files</text>
  <text x="200" y="466" text-anchor="middle" font-size="14" fill="#A8C8E8">→</text>
  <text x="305" y="466" text-anchor="middle" font-size="10.5" fill="white" font-weight="bold">Stage + Load</text>
  <text x="412" y="466" text-anchor="middle" font-size="14" fill="#A8C8E8">→</text>
  <text x="510" y="466" text-anchor="middle" font-size="10.5" fill="white" font-weight="bold">Tables</text>
  <text x="600" y="466" text-anchor="middle" font-size="14" fill="#A8C8E8">→</text>
  <text x="693" y="466" text-anchor="middle" font-size="10.5" fill="white" font-weight="bold">Views</text>
  <text x="775" y="466" text-anchor="middle" font-size="14" fill="#A8C8E8">→</text>
  <text x="852" y="466" text-anchor="middle" font-size="10.5" fill="white" font-weight="bold">Dashboard</text>

  <!-- Footer -->
  <text x="450" y="530" text-anchor="middle" font-size="10" fill="#AAAAAA">TruPharma Clinical Intelligence  ·  CS 5588 Spring 2026  ·  TRUPHARMA_DB.CLINICAL  ·  Warehouse: TRUPHARMA_WH</text>

</svg>
